<p align="center">
  <img src="media/logo.png" width="250" />
</p>

# Direct MVI

![version](https://img.shields.io/badge/version-0.2.1-blue.svg)
![language](https://img.shields.io/badge/language-Kotlin-purple.svg)
![platform](https://img.shields.io/badge/platform-Android%20%7C%20iOS%20%7C%20Desktop-green.svg)
![license](https://img.shields.io/badge/license-Apache%202.0-orange.svg)

**Direct** ‚Äî —ç—Ç–æ MVI –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è Kotlin. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç kmp, –∞ –∏–º–µ–Ω–Ω–æ android, iosX64, iosArm64, iosSimulatorArm64, jvm –∏ js —Ç–∞—Ä–≥–µ—Ç—ã.

–° –ø–æ–º–æ—â—å—é –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –º–æ–∂–Ω–æ –¥–µ–∫–ª–∞—Ä–∏–≤–Ω–æ –æ–ø–∏—Å—ã–≤–∞—Ç—å –≤–∞—à–∏ –Ω–∞–º–µ—Ä–µ–Ω–∏—è –∏ –≤—ã–±—Ä–∞—Ç—å —Ç—É –ø–æ–ª–∏—Ç–∏–∫—É –æ–±—Ä–∞–±–æ—Ç–∫–∏, –∫–æ—Ç–æ—Ä–∞—è –±–æ–ª—å—à–µ –≤—Å–µ–≥–æ –ø–æ–¥—Ö–æ–¥–∏—Ç.

---

## üì¶ –ö–∞–∫ –ø–æ–¥–∫–ª—é—á–∏—Ç—å

–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ —á–µ—Ä–µ–∑ JitPack.

**1. –î–æ–±–∞–≤—å—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –≤ `settings.gradle.kts`:**

```kotlin
dependencyResolutionManagement {
    repositories {
        google()
        mavenCentral()
        maven { url = uri("https://jitpack.io") } // <--- –í–æ—Ç —ç—Ç–æ
    }
}
```

**2. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ –Ω—É–∂–Ω—ã–µ –º–æ–¥—É–ª–∏:**

```kotlin
dependencies {
    val directVersion = "0.2.1"

    // –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞
    implementation("com.github.driedfru1t.Direct:direct-core:$directVersion")
    
    // ViewModel –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ–∫–∏ —Ç—è–Ω–µ—Ç –∑–∞ —Å–æ–±–æ–π –∏ direct-core
    implementation("com.github.driedfru1t.Direct:direct-viewModel:$directVersion")
}
```

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –û–ø–∏—Å—ã–≤–∞–µ–º –∫–æ–Ω—Ç—Ä–∞–∫—Ç
```kotlin
// –î–µ–π—Å—Ç–≤–∏—è (–í—Ö–æ–¥)
sealed interface HomeIntent : DirectIntent {
    data object Load : HomeIntent
    data class Click(val id: Int) : HomeIntent
}

// –°–æ—Å—Ç–æ—è–Ω–∏–µ (–í—ã—Ö–æ–¥)
data class HomeState(
    val isLoading: Boolean = false, 
    val items: List<String> = emptyList()
) : DirectState

// –†–∞–∑–æ–≤—ã–µ —Å–æ–±—ã—Ç–∏—è
sealed interface HomeEffect : DirectEffect {
    data object Navigate : HomeEffect
}
```

### 2. –ü–∏—à–µ–º ViewModel
–ù—É–∂–Ω–æ –Ω–∞—Å–ª–µ–¥–æ–≤–∞—Ç—å—Å—è –æ—Ç `DirectViewModel` –∏ –æ–ø–∏—Å–∞—Ç—å —Å—Ü–µ–Ω–∞—Ä–∏–∏ –≤ –±–ª–æ–∫–µ `intents`. –ö–∞–∂–¥—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π –º–æ–∂–Ω–æ –≥–∏–±–∫–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –∏ –≤—ã–±—Ä–∞—Ç—å —Å—Ç—Ä–∞—Ç–µ–≥–∏—é –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è.

```kotlin
class HomeViewModel(
    private val repo: Repository
) : DirectViewModel<HomeIntent, HomeState, HomeEffect>() {

    override fun createInitialState() = HomeState()

    override fun handleIntents() = intents {
        
        // onLatest: —ç—Ç–∞ —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –µ—Å–ª–∏ –ø—Ä–∏–¥–µ—Ç –Ω–æ–≤—ã–π –∏–Ω—Ç–µ–Ω—Ç –ø–æ–∫–∞ —Å—Ç–∞—Ä—ã–π –µ—â—ë –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è, 
        // —Ç–æ —Å—Ç–∞—Ä—ã–π –∏–Ω—Ç–µ–Ω—Ç –ø—Ä–µ–∫—Ä–∞—Ç–∏—Ç —Å–≤–æ—é —Ä–∞–±–æ—Ç—É –∏ –Ω–∞—á–Ω–µ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å—Å—è –Ω–æ–≤—ã–π
        onLatest<HomeIntent.Load> {
            setState { copy(isLoading = true) }
            val items = repo.load()
            setState { copy(isLoading = false, items = items) }
        }

        // on: –æ–±—ã—á–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ –æ—á–µ—Ä–µ–¥–∏
        on<HomeIntent.Click> {
            setEffect { HomeEffect.Navigate }
        }
    }
}
```

### 3. –ü–æ–¥–ø–∏—Å—ã–≤–∞–µ–º—Å—è –Ω–∞ –∏–∑–º–∏–Ω–µ–Ω–∏—è —Å—Ç—ç–π—Ç–∞
```kotlin
@Composable
fun AnotherScreen(){
    val viewModel = ... //–ø–æ–ª—É—á–∞–µ—Ç–µ –ª—é–±—ã–º–∏ —Å–ø–æ—Å–æ–±–∞–º–∏ viewModel
    val state by viewModel.state.collectAsStateWithLifecycle() // –¥–∞–ª–µ–µ –ø–æ–ª—É—á–∞–µ–º —Å—Ç—ç–π—Ç
}
```

–í–æ—Ç –ø–æ–∫–∞ –≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –æ–ø–∏—Å–∞–Ω–∏—è –∏–Ω—Ç–µ–Ω—Ç–æ–≤ –±–µ–∑ –∫–∞–∫–æ–π –ª–∏–±–æ —Å–ª–æ–∂–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏.
```kotlin
on<Intent>{  } 
onlatest<Intent>{  }
onSingle<Intent>{  }
onParallel<Intent>{  }
```
–ù–∏–∂–µ –±—É–¥–µ—Ç —Ç–∞–±–ª–∏—Ü–∞ —Å –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ–º –∫–∞–∂–¥–æ–π —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏

---

## ‚ö° –ì–∏–±–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ (DSL)

–ü—Ä–∏ –ø–æ–º–æ—â–∏ –ª–∏–±—ã –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –∏ —Å–ª–æ–∂–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏, –≥–¥–µ –Ω—É–∂–Ω—ã –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É—Å–ª–æ–≤–∏—è –∏–ª–∏ –ø—Ä–æ—á–∏–µ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏ –ø–æ—Ç–æ–∫–∞ —Å –∏–Ω—Ç–µ–Ω—Ç–æ–º. –¢–∞–∫ –∫–∞–∫ –∏–Ω—Ç–µ–Ω—Ç –ø—Ä–µ–¥—Å—Ç–≤–ª—è–µ—Ç —Å–æ–±–æ–π –ø–æ—Ç–æ–∫, —Ç–æ –≤ –±–∏–±–ª–∏–æ—Ç–µ–∫–µ –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –º–µ—Ç–æ–¥ `transform{ }` –≥–¥–µ –≤—ã –º–æ–∂–µ—Ç–µ –º–∞–Ω–∏–ø—É–ª–∏—Ä–æ–≤–∞—Ç—å –∏–Ω—Ç–µ–Ω—Ç–æ–º –ø–æ —Å–≤–æ–µ–º—É –∂–µ–ª–∞–Ω–∏—é.
### 1. –ü–∞–π–ø–ª–∞–π–Ω—ã (`setup`)
–ü—Ä–∏–º–µ—Ä, –≥–¥–µ –Ω—É–∂–Ω–æ –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –ª–∏—à–Ω–∏–µ –∑–∞–ø—Ä–æ—Å—ã –∏ –ø–æ–¥–æ–∂–¥–∞—Ç—å –≤–≤–æ–¥–∞ (debounce). –ù—É–∂–Ω–æ —É—á–µ—Å—Ç—å, —á—Ç–æ –≤—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –≤ —Ç–æ–º –ø–æ—Ä—è–¥–∫–µ –≤ –∫–∞–∫–æ–º –≤—ã –æ–±—ä—è–≤–∏–ª–∏, —Ç–æ –µ—Å—Ç—å —Å–≤–µ—Ä—Ö—É –≤–Ω–∏–∑(–∫—Ä–æ–º–µ –±–ª–æ–∫–∞ catch –∏ —Ç–∞–º –≥–¥–µ –æ–±—ä—è–≤–ª—è–µ—Ç—Å—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è)

```kotlin
setup<Search> {
    // 1. –ù–µ —à–ª–µ–º –∑–∞–ø—Ä–æ—Å—ã, –ø–æ–∫–∞ –Ω–∞–±—Ä–∞–Ω–æ –º–µ–Ω—å—à–µ 3 —Å–∏–º–≤–æ–ª–æ–≤
    filter { it.query.length > 2 } 
    
    // 2. –ñ–¥–µ–º 300–º—Å, –ø–æ–∫–∞ —é–∑–µ—Ä –ø–µ—Ä–µ—Å—Ç–∞–Ω–µ—Ç –ø–µ—á–∞—Ç–∞—Ç—å
    debounce(300)                  
    
    // 3. –ï—Å–ª–∏ –∑–∞–ø—Ä–æ—Å –Ω–µ –∏–∑–º–µ–Ω–∏–ª—Å—è ‚Äî –∏–≥–Ω–æ—Ä–∏—Ä—É–µ–º
    distinct()                     
    
    // 4. –õ–æ–≤–∏–º –æ—à–∏–±–∫–∏ –ø—Ä—è–º–æ –∑–¥–µ—Å—å
    catch { e -> ... }             

    // 5. –ò —Ç–æ–ª—å–∫–æ –ø–æ—Ç–æ–º –∑–∞–ø—É—Å–∫–∞–µ–º –∑–∞–≥—Ä—É–∑–∫—É (—Å –æ—Ç–º–µ–Ω–æ–π —Å—Ç–∞—Ä–æ–π)
    latest { intent ->             
        // –õ–æ–≥–∏–∫–∞ –ø–æ–∏—Å–∫–∞...
    }
}
```

### 2. –í–Ω–µ—à–Ω–∏–µ –¥–∞–Ω–Ω—ã–µ (`listen`)
Store –º–æ–∂–µ—Ç —Å–ª—É—à–∞—Ç—å –Ω–µ —Ç–æ–ª—å–∫–æ UI, –Ω–æ –∏ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö, —Ç–∞–π–º–µ—Ä—ã –∏–ª–∏ —Å–µ—Ç—å.

```kotlin
// –°–ª—É—à–∞–µ–º –ø–æ—Ç–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ –ë–î
listen(repository.userFlow) { user ->
    // –ö–∞–∫ —Ç–æ–ª—å–∫–æ –≤ –±–∞–∑–µ —á—Ç–æ-—Ç–æ –ø–æ–º–µ–Ω—è–ª–æ—Å—å ‚Äî –æ–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–µ–π—Ç
    setState { copy(currentUser = user) }
}

// –°–ª—É—à–∞–µ–º —Å–µ—Ç—å(–º–æ–∂–Ω–æ —Ç–∞–∫ –∂–µ –ª–µ–≥–∫–æ —Å–¥–µ–ª–∞—Ç—å —Å–ª–æ–∂–Ω—É—é –Ω–∞—Å—Ç—Ä–æ–π–∫—É)
listen(networkStatusFlow) {
    debounce(500) // –ó–∞—â–∏—Ç–∞ –æ—Ç "–¥—Ä–µ–±–µ–∑–≥–∞" —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
    distinct()
    
    latest { isOnline ->
        if (isOnline) reloadData()
    }
}
```

---

## üéõ –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ—Å—Ç–∏

–ì–ª–∞–≤–Ω–∞—è —Ñ–∏—à–∫–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏. –í—ã —Å–∞–º–∏ —Ä–µ—à–∞–µ—Ç–µ, —á—Ç–æ –¥–µ–ª–∞—Ç—å, –µ—Å–ª–∏ **–Ω–æ–≤–æ–µ** —Å–æ–±—ã—Ç–∏–µ –ø—Ä–∏—à–ª–æ, –ø–æ–∫–∞ –º—ã **–≤—Å—ë –µ—â—ë –∑–∞–Ω—è—Ç—ã** —Å—Ç–∞—Ä—ã–º. –í—Å–µ –ø–æ–ª–∏—Ç–∏–∫–∏ –¥–æ—Å—Ç—É–ø–Ω—ã –¥–ª—è `listen` –∏ `on*`. –ü–æ–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ 4 –ø–æ–ª–∏—Ç–∏–∫–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏–Ω—Ç–µ–Ω—Ç–æ–≤.

| –°—Ç—Ä–∞—Ç–µ–≥–∏—è                   | DSL                       | –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç                                                          |
|:----------------------------|:--------------------------|:----------------------------------------------------------------------|
| **Serial**(–û—á–µ—Ä–µ–¥—å)         | `on`/`serial`             | **–ñ–¥–µ—Ç** –ù–æ–≤–æ–µ —Å–æ–±—ã—Ç–∏–µ –≤—Å—Ç–∞–Ω–µ—Ç –≤ –æ—á–µ—Ä–µ–¥—å –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è –ø–æ—Å–ª–µ —Ç–µ–∫—É—â–µ–≥–æ. |
| **Latest**(–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫)      | `onLatest`/`latest`       | **–û—Ç–º–µ–Ω—è–µ—Ç** –°—Ç–∞—Ä–∞—è —Ä–∞–±–æ—Ç–∞ –±—Ä–æ—Å–∞–µ—Ç—Å—è –Ω–∞ –ø–æ–ª–ø—É—Ç–∏, –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –Ω–æ–≤–∞—è.   |
| **Dropping**(–ê–Ω—Ç–∏-—Å–ø–∞–º)     | `onSingle`/`dropping`     | **–ò–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç** –ï—Å–ª–∏ –º—ã –∑–∞–Ω—è—Ç—ã, –Ω–æ–≤—ã–µ –∫–ª–∏–∫–∏ –ø—Ä–æ—Å—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç.        |
| **Concurrent**(–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ) | `onParallel`/`concurrent` | **–ó–∞–ø—É—Å–∫–∞–µ—Ç** –í—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ, –Ω–∏–∫—Ç–æ –Ω–∏–∫–æ–≥–æ –Ω–µ –∂–¥–µ—Ç.        |

---

## üîå Middleware

–¢–∞–∫ –∂–µ –º–æ–∂–Ω–æ –ø–æ–¥–∫–ª—é—á–∏—Ç—å –Ω–µ–∫–æ–µ –ø–æ–¥–æ–±–∏–µ middleware. –≠—Ç–∞ —à—Ç—É–∫–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤–∫–ª–∏–Ω–∏—Ç—å—Å—è –≤ –∂–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª –∏ –Ω–µ –º–µ–Ω—è—è –Ω–∏—á–µ–≥–æ, –∫–∞–∫ —Ç–æ –æ—Ç—Ä–µ–∞–≥–∏—Ä–æ–≤–∞—Ç—å. –ù–∞–ø—Ä–∏–º–µ—Ä –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ(–ù—É–∂–Ω–æ –Ω–∞—Å–ª–µ–¥–æ–≤–∞—Ç—å—Å—è –æ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ DirectMiddleware):
```kotlin
// –ü—Ä–∏–º–µ—Ä –ø—Ä–æ—Å—Ç–æ–≥–æ –ª–æ–≥–≥–µ—Ä–∞
class LogMiddleware(val tag: String) : DirectMiddleware<Any, Any, Any> {
    override fun onIntent(intent: Any) = Log.d(tag, "‚û°Ô∏è Intent: $intent")
    override fun onStateChanged(old: Any, new: Any) = Log.d(tag, "üîÑ State: $new")
}

// –ü–æ–¥–∫–ª—é—á–∞–µ–º –æ–¥–Ω–æ–π —Å—Ç—Ä–æ—á–∫–æ–π
override fun handleIntents() = intents {
    install(LogMiddleware("HomeVM"))
}
```

## Inline feature store
–ú–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã —Å—Ç–æ—Ä –∏ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ–≥–æ. –î–ª—è —ç—Ç–æ–≥–æ –≤ –±–ª–æ–∫–µ `intents`(–¥–ª—è viewModel) –∏–ª–∏ `runDsl`(–µ—Å–ª–∏ –Ω–∞–ø—Ä—è–º—É—é –Ω–∞—Å–ª–µ–¥–æ–≤–∞—Ç—å—Å—è –æ—Ç DirectStore) –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å—â–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é `feature`. –í –Ω–µ–π –≤—ã —É–∫–∞–∑—ã–≤–∞–µ—Ç–µ –≤–∞—à —Å—Ç–æ—Ä –∏ –ø—Ä–æ–ø–∏—Å—ã–≤–∞–µ—Ç–µ –≤—Å–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã –º–µ–∂–¥—É –≤–∞—à–∏–º —Å—Ç–æ—Ä–æ–º –∏ –ø–æ–¥–∫–ª—é—á–∞–µ–º—ã–º.

**1. –ù–∞–¥–æ –æ–ø–∏—Å–∞—Ç—å –≤–Ω–µ–¥—Ä—è–µ–º—ã–π —Å—Ç–æ—Ä**

–í—Å—Ç—Ä–∞–∏–≤–∞–µ–º —ã —Å—Ç–æ—Ä –Ω–∏—á–µ–≥–æ –Ω–µ –∑–Ω–∞–µ—Ç –æ —Å–≤–æ—ë–º —Ä–æ–¥–∏—Ç–µ–ª–µ –∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª–µ–Ω
```kotlin
// –§–∏—á–∞ "–°–ø–∏—Å–æ–∫ –Ω–æ–≤–æ—Å—Ç–µ–π"
class NewsStore(scope: CoroutineScope) : DirectStore<NewsIntent, NewsState, NewsEffect>(scope) {
    override fun createInitialState() = NewsState()
    override fun handleIntents() = runDsl {
        onLatest<NewsIntent.Load> { /* –ª–æ–≥–∏–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ */ }
    }
}
```
**2. –ò–Ω—Ç—Ä–µ–≥—Ä–∏—Ä—É–µ–º –≤ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π —Å—Ç–æ—Ä –∏–ª–∏ ViewModel**

–†–æ–¥–∏—Ç–µ–ª—å —Å–æ–¥–µ—Ä–¥–∏—Ç —Ä–µ–±—ë–Ω–∫–∞ –∏ –∏ –ø—Ä–æ–±—Ä–∞—Å—ã–≤–∞–µ—Ç –µ–º—É –∏–Ω—Ç–µ–Ω—Ç—ã
```kotlin
class HomeViewModel(private val newsStore: NewsStore) : DirectViewModel<HomeIntent, HomeState, HomeEffect>() {

    override fun createInitialState() = HomeState(
        news = newsStore.createInitialState() // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –≤–ª–æ–∂–µ–Ω–Ω—ã–π —Å—Ç–µ–π—Ç
    )

    override fun handleIntents() = intents {
        
        // –ú–æ–Ω—Ç–∏—Ä—É–µ–º –¥–æ—á–µ—Ä–Ω—é—é —Ñ–∏—á—É
        feature(
            store = newsStore,
            // 1. –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è: –∫–æ–≥–¥–∞ —É —Ä–µ–±–µ–Ω–∫–∞ –º–µ–Ω—è–µ—Ç—Å—è —Å—Ç–µ–π—Ç, –æ–±–Ω–æ–≤–ª—è–µ–º —Å–≤–æ–π
            state = { childState -> 
                setState { copy(news = childState) } 
            },
            // 2. –≠—Ñ—Ñ–µ–∫—Ç—ã: —Å–ª—É—à–∞–µ–º –æ—à–∏–±–∫–∏ –∏–ª–∏ —Å–æ–±—ã—Ç–∏—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ —Ä–µ–±–µ–Ω–∫–∞
            effects = { childEffect ->
                if (childEffect is NewsEffect.Error) setEffect { HomeEffect.ShowToast }
            },
            // 3. –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è: –ø–µ—Ä–µ—Å—ã–ª–∞–µ–º –Ω—É–∂–Ω—ã–µ –∏–Ω—Ç–µ–Ω—Ç—ã —Ä–µ–±–µ–Ω–∫—É
            intents = { parentIntent ->
                when (parentIntent) {
                    is HomeIntent.RefreshAll -> NewsIntent.Load
                    is HomeIntent.NewsAction -> parentIntent.innerIntent
                    else -> null
                }
            }
        )
    }
}
```

**–°–æ–≤–µ—Ç**

–î–ª—è —Ç–æ–≥–æ —á—Ç–æ–±—ã –º–æ–∂–Ω–æ –±—ã–ª–æ –ø—Ä–æ–±—Ä–∞—Å—ã–≤–∞—Ç—å —É–¥–æ–±–Ω–æ –∏–Ω—Ç–µ–Ω—Ç—ã –º–µ–∂–¥—É —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–º —Å—Ç–æ—Ä–æ–º –∏ –¥–æ—á–µ—Ä–Ω–∏–º –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –∏–Ω—Ç–µ–Ω—Ç –æ–±—ë—Ä—Ç–∫—É
```kotlin
sealed interface ChildIntent : DirectIntent

sealed interface ParentIntent : DirectIntent {
    data class Wrapper(val intent: ChildIntent) : ParentIntent
}
```

---

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

```
Apache License 2.0
Copyright 2026 Nikol
```